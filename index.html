<!DOCTYPE html>
<html lang="id" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyricFlow v1.2 - Professional Music Player</title>
    
    <!-- Core CSS -->
    <link rel="stylesheet" href="css/core.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/themes/dark.css" id="themeStylesheet">
</head>
<body>
    <!-- App Container -->
    <div id="app" class="app">
        
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">
                    <span class="logo-icon">üéµ</span>
                    <span class="logo-text">LyricFlow</span>
                    <span class="version">v1.2</span>
                </h1>
            </div>
            
            <nav class="nav-menu">
                <button class="nav-item active" data-view="library">
                    <span>üìö</span> Library
                </button>
                <button class="nav-item" data-view="playlists">
                    <span>üìë</span> Playlists
                </button>
                <button class="nav-item" data-view="favorites">
                    <span>‚ù§Ô∏è</span> Favorites
                </button>
                <button class="nav-item" data-view="recent">
                    <span>üïê</span> Recent
                </button>
            </nav>
            
            <div class="playlists-section">
                <h3>My Playlists</h3>
                <div id="playlistNav" class="playlist-nav">
                    <!-- Dynamic playlists -->
                </div>
                <button class="btn-new-playlist" onclick="app.playlists.create()">
                    + New Playlist
                </button>
            </div>
            
            <div class="sidebar-footer">
                <button class="btn-settings" onclick="app.toggleSettings()">
                    ‚öôÔ∏è Settings
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="Search songs, artists...">
                    <button class="btn-search">üîç</button>
                </div>
                
                <div class="top-actions">
                    <button class="btn-theme" onclick="app.themes.toggle()" title="Change Theme">
                        üé®
                    </button>
                    <button class="btn-mini-player" onclick="app.toggleMiniPlayer()" title="Mini Player">
                        ü™ü
                    </button>
                    <button class="btn-dev" onclick="app.dev.toggle()" title="Developer Mode">
                        üîß
                    </button>
                </div>
            </header>

            <!-- Views Container -->
            <div class="views-container">
                <!-- Library View -->
                <div id="libraryView" class="view active">
                    <div class="view-header">
                        <h2>Music Library</h2>
                        <div class="view-actions">
                            <button class="btn-sort" onclick="app.library.toggleSort()">
                                ‚ÜïÔ∏è Sort
                            </button>
                            <button class="btn-view" onclick="app.library.toggleView()">
                                ‚äû Grid
                            </button>
                        </div>
                    </div>
                    
                    <div id="songGrid" class="song-grid">
                        <div class="loading-skeleton">
                            <div class="skeleton-card"></div>
                            <div class="skeleton-card"></div>
                            <div class="skeleton-card"></div>
                        </div>
                    </div>
                </div>

                <!-- Playlist View -->
                <div id="playlistView" class="view">
                    <div class="playlist-header">
                        <div class="playlist-cover" id="playlistCover">
                            üìë
                        </div>
                        <div class="playlist-info">
                            <h2 id="playlistTitle">Select a Playlist</h2>
                            <p id="playlistDesc">Choose from sidebar</p>
                            <div class="playlist-stats">
                                <span id="playlistCount">0 songs</span>
                                <span id="playlistDuration">0 min</span>
                            </div>
                            <div class="playlist-actions">
                                <button class="btn-play-all" onclick="app.playlist.playAll()">
                                    ‚ñ∂ Play All
                                </button>
                                <button class="btn-shuffle" onclick="app.playlist.shuffle()">
                                    üîÄ Shuffle
                                </button>
                            </div>
                        </div>
                    </div>
                    <div id="playlistSongs" class="playlist-songs-list"></div>
                </div>
            </div>
        </main>

        <!-- Player Bar (Fixed Bottom) -->
        <div class="player-bar" id="playerBar">
            <div class="player-track">
                <img id="miniCover" src="" alt="" class="mini-cover">
                <div class="track-details">
                    <div id="miniTitle" class="mini-title">No song playing</div>
                    <div id="miniArtist" class="mini-artist">-</div>
                </div>
                <button class="btn-favorite" onclick="app.player.toggleFavorite()">
                    ü§ç
                </button>
            </div>
            
            <div class="player-controls">
                <div class="control-buttons">
                    <button class="btn-shuffle" onclick="app.player.toggleShuffle()" title="Shuffle">
                        üîÄ
                    </button>
                    <button class="btn-prev" onclick="app.player.prev()" title="Previous">
                        ‚èÆ
                    </button>
                    <button class="btn-play" id="playBtn" onclick="app.player.toggle()" title="Play/Pause">
                        ‚ñ∂
                    </button>
                    <button class="btn-next" onclick="app.player.next()" title="Next">
                        ‚è≠
                    </button>
                    <button class="btn-repeat" onclick="app.player.toggleRepeat()" title="Repeat">
                        üîÅ
                    </button>
                </div>
                
                <div class="progress-section">
                    <span id="currentTime" class="time">00:00:00</span>
                    <div class="progress-bar" id="progressBar">
                        <div class="progress-fill" id="progressFill"></div>
                        <div class="progress-handle"></div>
                    </div>
                    <span id="totalTime" class="time">00:00:00</span>
                </div>
            </div>
            
            <div class="player-extras">
                <button class="btn-lyrics" onclick="app.lyrics.togglePanel()" title="Lyrics">
                    üé§
                </button>
                <button class="btn-queue" onclick="app.queue.toggle()" title="Queue">
                    ‚ò∞
                </button>
                <div class="volume-control">
                    <button class="btn-volume" onclick="app.player.toggleMute()">
                        üîä
                    </button>
                    <input type="range" id="volumeSlider" min="0" max="100" value="80">
                </div>
                <button class="btn-expand" onclick="app.player.expand()" title="Expand">
                    ‚õ∂
                </button>
            </div>
        </div>

        <!-- Lyrics Panel (Slide-up) -->
        <div class="lyrics-panel" id="lyricsPanel">
            <div class="lyrics-header">
                <h3>üé§ Lyrics</h3>
                <div class="lyrics-controls">
                    <button onclick="app.lyrics.adjustOffset(-0.5)">-0.5s</button>
                    <span id="lyricsOffset">0s</span>
                    <button onclick="app.lyrics.adjustOffset(0.5)">+0.5s</button>
                    <button class="btn-close" onclick="app.lyrics.togglePanel()">√ó</button>
                </div>
            </div>
            <div class="lyrics-content" id="lyricsContent">
                <p class="lyrics-placeholder">Select a song to view lyrics...</p>
            </div>
        </div>

        <!-- Expanded Player (Overlay) -->
        <div class="expanded-player" id="expandedPlayer">
            <div class="expanded-bg" id="expandedBg"></div>
            <button class="btn-collapse" onclick="app.player.collapse()">‚Üì</button>
            
            <div class="expanded-content">
                <div class="expanded-left">
                    <div class="vinyl-container">
                        <img id="expandedCover" src="" alt="" class="vinyl-cover">
                        <div class="vinyl-grooves"></div>
                    </div>
                </div>
                
                <div class="expanded-center">
                    <canvas id="visualizer" class="visualizer"></canvas>
                    <div class="expanded-info">
                        <h2 id="expandedTitle">Title</h2>
                        <p id="expandedArtist">Artist</p>
                    </div>
                </div>
                
                <div class="expanded-right">
                    <div class="up-next">
                        <h4>Up Next</h4>
                        <div id="upNextList" class="up-next-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mini Player (Floating) -->
        <div class="mini-player" id="miniPlayer">
            <img id="miniPlayerCover" src="" alt="">
            <div class="mini-player-info">
                <div id="miniPlayerTitle">Title</div>
                <div id="miniPlayerArtist">Artist</div>
            </div>
            <button onclick="app.player.toggle()">‚ñ∂</button>
            <button onclick="app.toggleMiniPlayer()">√ó</button>
        </div>

        <!-- Settings Modal -->
        <div class="modal" id="settingsModal">
            <div class="modal-content settings-modal">
                <h2>‚öôÔ∏è Settings</h2>
                
                <div class="settings-section">
                    <h3>Appearance</h3>
                    <div class="setting-item">
                        <label>Theme</label>
                        <select id="themeSelect" onchange="app.themes.set(this.value)">
                            <option value="dark">Dark (Default)</option>
                            <option value="light">Light</option>
                            <option value="neon">Neon</option>
                            <option value="minimal">Minimal</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Playback</h3>
                    <div class="setting-item">
                        <label>Crossfade Duration</label>
                        <input type="range" min="0" max="10" value="2" id="crossfadeSlider">
                        <span id="crossfadeValue">2s</span>
                    </div>
                    <div class="setting-item">
                        <label>Default Volume</label>
                        <input type="range" min="0" max="100" value="80" id="defaultVolume">
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Lyrics</h3>
                    <div class="setting-item">
                        <label>Font Size</label>
                        <select id="lyricsFontSize">
                            <option value="small">Small</option>
                            <option value="medium" selected>Medium</option>
                            <option value="large">Large</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>Auto-scroll</label>
                        <input type="checkbox" id="autoScrollLyrics" checked>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>Data</h3>
                    <div class="setting-actions">
                        <button onclick="app.data.export()">üì§ Export Data</button>
                        <button onclick="app.data.import()">üì• Import Data</button>
                        <button onclick="app.data.clear()" class="btn-danger">üóëÔ∏è Clear All Data</button>
                    </div>
                </div>
                
                <button class="btn-close-modal" onclick="app.toggleSettings()">Close</button>
            </div>
        </div>

        <!-- Developer Panel (v1.2 Enhanced) -->
        <div class="dev-panel" id="devPanel">
            <div class="dev-header">
                <h3>üîß Developer Panel v1.2</h3>
                <button onclick="app.dev.toggle()" class="btn-close">√ó</button>
            </div>
            
            <div class="dev-tabs">
                <button class="dev-tab active" data-tab="songs">Songs</button>
                <button class="dev-tab" data-tab="bulk">Bulk Import</button>
                <button class="dev-tab" data-tab="plugins">Plugins</button>
                <button class="dev-tab" data-tab="system">System</button>
            </div>
            
            <div class="dev-content">
                <!-- Songs Tab -->
                <div id="devSongs" class="dev-tab-content active">
                    <div class="dev-actions">
                        <button onclick="app.dev.showAddForm()" class="btn-primary">+ Add Song</button>
                        <button onclick="app.dev.scanFolder()">üìÅ Scan Folder</button>
                        <button onclick="app.dev.refresh()" class="btn-secondary">üîÑ Refresh</button>
                    </div>
                    
                    <div id="devSongList" class="dev-song-list"></div>
                    
                    <div id="addSongForm" class="dev-form hidden">
                        <h4>Add New Song</h4>
                        <input type="text" id="devSongId" placeholder="Unique ID (e.g., song_001)">
                        <input type="text" id="devSongTitle" placeholder="Song Title *">
                        <input type="text" id="devSongArtist" placeholder="Artist *">
                        <input type="text" id="devSongAlbum" placeholder="Album">
                        <input type="text" id="devSongCover" placeholder="Cover Image URL">
                        <input type="text" id="devSongAudio" placeholder="Audio File URL *">
                        <textarea id="devSongLyrics" placeholder="Lyrics (Format: HH:MM:SS|Lyric text)
Example:
00:00:05|First line of lyrics
00:00:12|Second line here
00:00:20|Third line continues"></textarea>
                        <div class="form-actions">
                            <button onclick="app.dev.saveSong()" class="btn-primary">üíæ Save</button>
                            <button onclick="app.dev.hideAddForm()" class="btn-secondary">Cancel</button>
                        </div>
                    </div>
                </div>
                
                <!-- Bulk Import Tab -->
                <div id="devBulk" class="dev-tab-content">
                    <div class="bulk-import">
                        <h4>Import Multiple Songs</h4>
                        <p>Paste JSON array of songs:</p>
                        <textarea id="bulkImportData" placeholder='[
  {
    "id": "song_001",
    "title": "Song Name",
    "artist": "Artist Name",
    "audio": "url/to/audio.mp3",
    "lyrics": "00:00:05|First line..."
  }
]'></textarea>
                        <button onclick="app.dev.bulkImport()" class="btn-primary">Import All</button>
                    </div>
                </div>
                
                <!-- Plugins Tab -->
                <div id="devPlugins" class="dev-tab-content">
                    <div class="plugins-list" id="pluginsList">
                        <p>No plugins installed</p>
                    </div>
                    <button onclick="app.plugins.load()" class="btn-primary">Load Plugin</button>
                </div>
                
                <!-- System Tab -->
                <div id="devSystem" class="dev-tab-content">
                    <div class="system-info">
                        <p><strong>Version:</strong> 1.2.0</p>
                        <p><strong>Songs:</strong> <span id="sysSongCount">0</span></p>
                        <p><strong>Playlists:</strong> <span id="sysPlaylistCount">0</span></p>
                        <p><strong>Storage Used:</strong> <span id="sysStorage">0 MB</span></p>
                    </div>
                    <div class="system-actions">
                        <button onclick="app.dev.clearCache()">Clear Cache</button>
                        <button onclick="app.dev.restart()">üîÑ Restart App</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Sleep Timer Modal -->
        <div class="sleep-timer" id="sleepTimer">
            <span>‚è±Ô∏è Sleep: <span id="sleepTimeLeft">--:--</span></span>
            <button onclick="app.player.cancelSleep()">Cancel</button>
        </div>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <!-- Scripts -->
    <script src="js/core.js"></script>
    <script src="js/player.js"></script>
    <script src="js/lyrics.js"></script>
    <script src="js/playlist.js"></script>
    <script src="js/visualizer.js"></script>
    <script src="js/plugins/plugin-manager.js"></script>
    <script src="js/library.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/dev.js"></script>
    
    <script>
        // Initialize all modules after DOM loaded
        document.addEventListener('DOMContentLoaded', () => {
            App.library.init();
            App.themes.init();
            App.dev.init();
        });
    </script>
</body>
</html>
