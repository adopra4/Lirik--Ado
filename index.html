<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0a0a0f">
    <title>LyricFlow v1.3 - Music & Lyrics Platform</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/core.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/themes/dark.css" id="theme-stylesheet">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽµ</text></svg>">
</head>
<body class="dark-theme">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="logo-animation">
                <div class="music-wave">
                    <span></span><span></span><span></span><span></span><span></span>
                </div>
                <h1 class="logo-text">Lyric<span class="highlight">Flow</span></h1>
            </div>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
            <p class="loading-status">Initializing audio engine...</p>
            <p class="loading-version">v1.3.0</p>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" class="app-container hidden">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-wave-square"></i>
                    <span>LyricFlow</span>
                </div>
                <button class="sidebar-toggle" id="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3>Menu</h3>
                    <ul>
                        <li class="active">
                            <a href="#home" data-page="home">
                                <i class="fas fa-home"></i>
                                <span>Home</span>
                            </a>
                        </li>
                        <li>
                            <a href="#search" data-page="search">
                                <i class="fas fa-search"></i>
                                <span>Search</span>
                            </a>
                        </li>
                        <li>
                            <a href="#library" data-page="library">
                                <i class="fas fa-music"></i>
                                <span>Library</span>
                            </a>
                        </li>
                        <li>
                            <a href="#playlists" data-page="playlists">
                                <i class="fas fa-list"></i>
                                <span>Playlists</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section">
                    <h3>Your Collection</h3>
                    <ul>
                        <li>
                            <a href="#favorites" data-page="favorites">
                                <i class="fas fa-heart"></i>
                                <span>Favorites</span>
                            </a>
                        </li>
                        <li>
                            <a href="#recent" data-page="recent">
                                <i class="fas fa-clock"></i>
                                <span>Recently Played</span>
                            </a>
                        </li>
                        <li>
                            <a href="#offline" data-page="offline">
                                <i class="fas fa-download"></i>
                                <span>Offline</span>
                            </a>
                        </li>
                    </ul>
                </div>
                
                <div class="nav-section" id="dev-section" style="display: none;">
                    <h3>Developer</h3>
                    <ul>
                        <li>
                            <a href="#upload" data-page="upload">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <span>Upload Music</span>
                            </a>
                        </li>
                        <li>
                            <a href="#analytics" data-page="analytics">
                                <i class="fas fa-chart-line"></i>
                                <span>Analytics</span>
                            </a>
                        </li>
                        <li>
                            <a href="#settings" data-page="settings">
                                <i class="fas fa-cog"></i>
                                <span>Settings</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-profile" id="user-profile">
                    <div class="avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <span class="username">Guest User</span>
                        <span class="user-role">Free Plan</span>
                    </div>
                    <button class="user-menu-btn" id="user-menu-btn">
                        <i class="fas fa-ellipsis-v"></i>
                    </button>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Bar -->
            <header class="top-bar">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search songs, artists, lyrics..." id="global-search">
                    <div class="search-filters">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="songs">Songs</button>
                        <button class="filter-btn" data-filter="artists">Artists</button>
                        <button class="filter-btn" data-filter="lyrics">Lyrics</button>
                    </div>
                </div>
                
                <div class="top-bar-actions">
                    <button class="action-btn" id="voice-search-btn" title="Voice Search">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="action-btn" id="notifications-btn" title="Notifications">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </button>
                    <button class="action-btn" id="theme-toggle" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                    <button class="login-btn" id="login-btn">Login</button>
                </div>
            </header>

            <!-- Content Pages -->
            <div class="content-area" id="content-area">
                <!-- Home Page -->
                <section class="page active" id="page-home">
                    <div class="hero-section">
                        <div class="hero-content">
                            <h1>Discover Your <span class="gradient-text">Rhythm</span></h1>
                            <p>Experience music with synchronized lyrics, smart playlists, and immersive audio visualization.</p>
                            <div class="hero-actions">
                                <button class="btn btn-primary btn-lg" id="start-listening">
                                    <i class="fas fa-play"></i>
                                    Start Listening
                                </button>
                                <button class="btn btn-secondary btn-lg" id="explore-library">
                                    Explore Library
                                </button>
                            </div>
                        </div>
                        <div class="hero-visual">
                            <div class="album-art-carousel">
                                <div class="album-card active">
                                    <div class="album-art" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                        <i class="fas fa-music"></i>
                                    </div>
                                </div>
                                <div class="album-card">
                                    <div class="album-art" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                        <i class="fas fa-guitar"></i>
                                    </div>
                                </div>
                                <div class="album-card">
                                    <div class="album-art" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                                        <i class="fas fa-drum"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section trending-section">
                        <div class="section-header">
                            <h2>Trending Now</h2>
                            <button class="view-all">View All</button>
                        </div>
                        <div class="song-grid" id="trending-songs">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <div class="section recently-played-section">
                        <div class="section-header">
                            <h2>Recently Played</h2>
                            <button class="view-all">View All</button>
                        </div>
                        <div class="song-list" id="recently-played">
                            <!-- Dynamic content -->
                        </div>
                    </div>

                    <div class="section mood-section">
                        <div class="section-header">
                            <h2>Mood & Genres</h2>
                        </div>
                        <div class="mood-grid">
                            <div class="mood-card" data-mood="happy">
                                <div class="mood-icon">ðŸ˜Š</div>
                                <span>Happy</span>
                            </div>
                            <div class="mood-card" data-mood="sad">
                                <div class="mood-icon">ðŸ˜¢</div>
                                <span>Sad</span>
                            </div>
                            <div class="mood-card" data-mood="energetic">
                                <div class="mood-icon">âš¡</div>
                                <span>Energetic</span>
                            </div>
                            <div class="mood-card" data-mood="chill">
                                <div class="mood-icon">ðŸŒ™</div>
                                <span>Chill</span>
                            </div>
                            <div class="mood-card" data-mood="focus">
                                <div class="mood-icon">ðŸŽ¯</div>
                                <span>Focus</span>
                            </div>
                            <div class="mood-card" data-mood="workout">
                                <div class="mood-icon">ðŸ’ª</div>
                                <span>Workout</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Player Page (Full Screen) -->
                <section class="page player-page" id="page-player">
                    <div class="player-background">
                        <div class="blur-bg" id="player-blur-bg"></div>
                        <div class="noise-overlay"></div>
                    </div>
                    
                    <div class="player-container">
                        <div class="player-main">
                            <div class="now-playing">
                                <div class="album-art-large" id="current-album-art">
                                    <div class="album-art-placeholder">
                                        <i class="fas fa-music"></i>
                                    </div>
                                    <div class="playing-indicator">
                                        <span></span><span></span><span></span><span></span>
                                    </div>
                                </div>
                                
                                <div class="track-info-large">
                                    <h2 id="current-title">Select a Song</h2>
                                    <p id="current-artist">Artist Name</p>
                                    <div class="track-meta">
                                        <span id="current-album">Album Name</span>
                                        <span class="separator">â€¢</span>
                                        <span id="current-year">2024</span>
                                    </div>
                                </div>

                                <div class="player-actions">
                                    <button class="action-btn" id="btn-like">
                                        <i class="far fa-heart"></i>
                                    </button>
                                    <button class="action-btn" id="btn-add-to-playlist">
                                        <i class="fas fa-plus"></i>
                                    </button>
                                    <button class="action-btn" id="btn-share">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                    <button class="action-btn" id="btn-lyrics-toggle">
                                        <i class="fas fa-align-center"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="lyrics-container" id="lyrics-container">
                                <div class="lyrics-header">
                                    <h3>Lyrics</h3>
                                    <button class="btn-icon" id="lyrics-expand">
                                        <i class="fas fa-expand"></i>
                                    </button>
                                </div>
                                <div class="lyrics-content" id="lyrics-content">
                                    <p class="lyrics-placeholder">Select a song to view lyrics</p>
                                </div>
                                <div class="lyrics-controls">
                                    <button class="btn-text" id="sync-lyrics-btn">
                                        <i class="fas fa-sync"></i>
                                        Sync Lyrics
                                    </button>
                                    <button class="btn-text" id="edit-lyrics-btn" style="display: none;">
                                        <i class="fas fa-edit"></i>
                                        Edit
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="player-controls-section">
                            <div class="visualizer-container">
                                <canvas id="audio-visualizer"></canvas>
                            </div>
                            
                            <div class="progress-section">
                                <span class="time-current" id="current-time">0:00</span>
                                <div class="progress-bar-container">
                                    <div class="progress-bar" id="progress-bar">
                                        <div class="progress-fill" id="progress-fill"></div>
                                        <div class="progress-handle" id="progress-handle"></div>
                                    </div>
                                    <div class="waveform-container" id="waveform"></div>
                                </div>
                                <span class="time-total" id="total-time">0:00</span>
                            </div>

                            <div class="main-controls">
                                <button class="control-btn" id="btn-shuffle">
                                    <i class="fas fa-random"></i>
                                </button>
                                <button class="control-btn" id="btn-prev">
                                    <i class="fas fa-step-backward"></i>
                                </button>
                                <button class="control-btn btn-play" id="btn-play">
                                    <i class="fas fa-play"></i>
                                </button>
                                <button class="control-btn" id="btn-next">
                                    <i class="fas fa-step-forward"></i>
                                </button>
                                <button class="control-btn" id="btn-repeat">
                                    <i class="fas fa-redo"></i>
                                </button>
                            </div>

                            <div class="secondary-controls">
                                <div class="volume-control">
                                    <button class="control-btn" id="btn-mute">
                                        <i class="fas fa-volume-up"></i>
                                    </button>
                                    <div class="volume-slider-container">
                                        <div class="volume-slider" id="volume-slider">
                                            <div class="volume-fill" id="volume-fill"></div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="playback-options">
                                    <button class="control-btn" id="btn-speed" title="Playback Speed">
                                        <span>1x</span>
                                    </button>
                                    <button class="control-btn" id="btn-equalizer" title="Equalizer">
                                        <i class="fas fa-sliders-h"></i>
                                    </button>
                                    <button class="control-btn" id="btn-queue" title="Queue">
                                        <i class="fas fa-list-ul"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Library Page -->
                <section class="page" id="page-library">
                    <div class="page-header">
                        <h1>Your Library</h1>
                        <div class="header-actions">
                            <button class="btn btn-secondary" id="import-music">
                                <i class="fas fa-file-import"></i>
                                Import
                            </button>
                            <button class="btn btn-primary" id="create-playlist">
                                <i class="fas fa-plus"></i>
                                New Playlist
                            </button>
                        </div>
                    </div>
                    
                    <div class="library-tabs">
                        <button class="tab-btn active" data-tab="songs">Songs</button>
                        <button class="tab-btn" data-tab="albums">Albums</button>
                        <button class="tab-btn" data-tab="artists">Artists</button>
                        <button class="tab-btn" data-tab="genres">Genres</button>
                    </div>
                    
                    <div class="library-content" id="library-content">
                        <div class="song-table-container">
                            <table class="song-table">
                                <thead>
                                    <tr>
                                        <th class="col-number">#</th>
                                        <th class="col-title">Title</th>
                                        <th class="col-artist">Artist</th>
                                        <th class="col-album">Album</th>
                                        <th class="col-date">Date Added</th>
                                        <th class="col-duration"><i class="far fa-clock"></i></th>
                                        <th class="col-actions"></th>
                                    </tr>
                                </thead>
                                <tbody id="library-songs">
                                    <!-- Dynamic content -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </section>

                <!-- Upload Page (Dev Only) -->
                <section class="page" id="page-upload">
                    <div class="page-header">
                        <h1>Upload Music</h1>
                        <p class="page-description">Add new songs to the library with synchronized lyrics</p>
                    </div>
                    
                    <div class="upload-container">
                        <div class="upload-area" id="upload-dropzone">
                            <div class="upload-icon">
                                <i class="fas fa-cloud-upload-alt"></i>
                            </div>
                            <h3>Drop your music here</h3>
                            <p>or click to browse files</p>
                            <input type="file" id="audio-file-input" accept="audio/*" multiple hidden>
                            <button class="btn btn-primary" onclick="document.getElementById('audio-file-input').click()">
                                Select Files
                            </button>
                        </div>
                        
                        <div class="upload-form">
                            <div class="form-group">
                                <label>Song Title</label>
                                <input type="text" id="upload-title" placeholder="Enter song title">
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Artist</label>
                                    <input type="text" id="upload-artist" placeholder="Artist name">
                                </div>
                                <div class="form-group">
                                    <label>Album</label>
                                    <input type="text" id="upload-album" placeholder="Album name">
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Lyrics with Timestamps</label>
                                <div class="lyrics-input-tabs">
                                    <button class="tab-btn active" data-tab="simple">Simple</button>
                                    <button class="tab-btn" data-tab="advanced">Advanced Editor</button>
                                </div>
                                <textarea id="upload-lyrics" placeholder="[00:00.00] First line of lyrics&#10;[00:05.00] Second line of lyrics&#10;[00:10.00] Third line..."></textarea>
                                <div class="input-help">
                                    <i class="fas fa-info-circle"></i>
                                    Format: [mm:ss.xx] Lyrics text
                                </div>
                            </div>
                            <div class="form-group">
                                <label>Album Art</label>
                                <div class="image-upload" id="artwork-upload">
                                    <div class="image-preview">
                                        <i class="fas fa-image"></i>
                                    </div>
                                    <input type="file" id="artwork-input" accept="image/*" hidden>
                                    <button class="btn btn-secondary" onclick="document.getElementById('artwork-input').click()">
                                        Choose Image
                                    </button>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button class="btn btn-secondary" id="upload-cancel">Cancel</button>
                                <button class="btn btn-primary" id="upload-submit">
                                    <i class="fas fa-upload"></i>
                                    Upload Song
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Login Modal -->
                <div class="modal" id="login-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Welcome Back</h2>
                            <button class="modal-close" id="close-login">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="login-tabs">
                                <button class="tab-btn active" data-tab="user">User</button>
                                <button class="tab-btn" data-tab="developer">Developer</button>
                            </div>
                            <form id="login-form">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" id="login-username" required>
                                </div>
                                <div class="form-group">
                                    <label>Password</label>
                                    <input type="password" id="login-password" required>
                                </div>
                                <div class="form-options">
                                    <label class="checkbox">
                                        <input type="checkbox" id="remember-me">
                                        <span>Remember me</span>
                                    </label>
                                    <a href="#" class="forgot-password">Forgot password?</a>
                                </div>
                                <button type="submit" class="btn btn-primary btn-block">Login</button>
                            </form>
                            <div class="divider">
                                <span>or</span>
                            </div>
                            <button class="btn btn-secondary btn-block" id="guest-login">
                                Continue as Guest
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Mini Player (Fixed Bottom) -->
        <div class="mini-player" id="mini-player">
            <div class="mini-player-progress">
                <div class="mini-progress-bar" id="mini-progress"></div>
            </div>
            <div class="mini-player-content">
                <div class="mini-track-info">
                    <div class="mini-album-art" id="mini-art">
                        <i class="fas fa-music"></i>
                    </div>
                    <div class="mini-text">
                        <span class="mini-title" id="mini-title">No song playing</span>
                        <span class="mini-artist" id="mini-artist">-</span>
                    </div>
                </div>
                <div class="mini-controls">
                    <button class="mini-btn" id="mini-prev">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="mini-btn btn-play" id="mini-play">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="mini-btn" id="mini-next">
                        <i class="fas fa-step-forward"></i>
                    </button>
                </div>
                <div class="mini-actions">
                    <button class="mini-btn" id="mini-lyrics">
                        <i class="fas fa-align-center"></i>
                    </button>
                    <button class="mini-btn" id="mini-expand">
                        <i class="fas fa-expand-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- Context Menu -->
    <div class="context-menu" id="context-menu"></div>

    <!-- Scripts -->
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/core.js"></script>
    <script src="js/player.js"></script>
    <script src="js/lyrics.js"></script>
    <script src="js/playlist.js"></script>
    <script src="js/library.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/dev.js"></script>
    
    <!-- Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker registration failed'));
        }
    </script>
</body>
</html>