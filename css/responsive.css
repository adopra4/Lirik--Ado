/* ============================================
   LYRICFLOW v1.3 - RESPONSIVE STYLES
   ============================================ */

/* ============================================
   BREAKPOINTS
   - Mobile: < 768px
   - Tablet: 768px - 1024px
   - Desktop: > 1024px
   - Large: > 1440px
   ============================================ */

/* ============================================
   MOBILE (< 768px)
   ============================================ */
@media (max-width: 767px) {
    :root {
        --sidebar-width: 0;
        --header-height: 60px;
        --player-height: 80px;
        
        --text-5xl: 2rem;
        --text-4xl: 1.75rem;
        --text-3xl: 1.5rem;
        --text-2xl: 1.25rem;
    }

    /* App Layout */
    #app {
        grid-template-areas: 
            "header"
            "main"
            "player";
        grid-template-columns: 1fr;
        grid-template-rows: var(--header-height) 1fr var(--player-height);
    }

    /* Sidebar - Hidden by default on mobile */
    .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: 280px;
        transform: translateX(-100%);
        z-index: 1000;
        transition: transform 0.3s ease;
    }

    .sidebar.active {
        transform: translateX(0);
    }

    .sidebar-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        z-index: 999;
    }

    .sidebar-overlay.active {
        opacity: 1;
        visibility: visible;
    }

    .sidebar-toggle {
        display: flex;
    }

    /* Header */
    .main-header {
        padding: 0 var(--space-md);
    }

    .header-search {
        max-width: none;
        flex: 1;
    }

    #global-search {
        font-size: 16px; /* Prevent zoom on iOS */
    }

    .user-name,
    .theme-switcher,
    .action-btn:not(#btn-notifications):not(#btn-p2p-status) {
        display: none;
    }

    /* Main Content */
    .page {
        padding: var(--space-md);
    }

    /* Hero Section */
    .hero-section {
        grid-template-columns: 1fr;
        padding: var(--space-xl) var(--space-md);
        text-align: center;
        min-height: auto;
    }

    .hero-title {
        font-size: var(--text-3xl);
    }

    .hero-subtitle {
        font-size: var(--text-base);
    }

    .hero-actions {
        flex-direction: column;
        gap: var(--space-sm);
    }

    .hero-visual {
        order: -1;
    }

    .vinyl-record {
        width: 200px;
        height: 200px;
    }

    /* Grids */
    .song-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: var(--space-md);
    }

    .playlist-grid {
        grid-template-columns: 1fr;
    }

    /* Song List */
    .song-list-item {
        grid-template-columns: 40px 1fr auto;
    }

    .song-list-duration,
    .song-list-actions {
        display: none;
    }

    /* Fullscreen Player */
    .player-layout {
        grid-template-columns: 1fr;
        padding: var(--space-lg);
        padding-top: 60px;
        gap: var(--space-lg);
    }

    .player-left {
        order: 1;
    }

    .player-right {
        order: 2;
        height: 300px;
    }

    .album-art-container {
        max-width: 280px;
    }

    .song-title {
        font-size: var(--text-xl);
    }

    .song-artist {
        font-size: var(--text-base);
    }

    .lyrics-line {
        font-size: var(--text-base);
    }

    .lyrics-line.active {
        font-size: var(--text-lg);
    }

    /* Player Controls */
    .controls-section {
        gap: var(--space-md);
    }

    .control-btn:not(.btn-play-large) {
        width: 36px;
        height: 36px;
    }

    .btn-play-large {
        width: 56px;
        height: 56px;
    }

    .extra-controls {
        gap: var(--space-md);
    }

    .volume-control {
        display: none;
    }

    /* Mini Player */
    .player-bar {
        grid-template-columns: 1fr auto;
        padding: 0 var(--space-md);
        gap: var(--space-md);
    }

    .player-info {
        min-width: 0;
    }

    .player-cover {
        width: 48px;
        height: 48px;
    }

    .player-controls {
        display: none;
    }

    .player-extras {
        gap: var(--space-xs);
    }

    .volume-wrapper,
    .fullscreen-btn {
        display: none;
    }

    /* Modals */
    .modal {
        width: 95%;
        max-height: 80vh;
    }

    .modal-body {
        padding: var(--space-md);
    }

    /* AI Generator */
    .ai-options {
        grid-template-columns: 1fr;
    }

    /* P2P */
    .join-room {
        flex-direction: column;
    }

    /* Dev Panel */
    .dev-grid {
        grid-template-columns: 1fr;
    }

    /* Toast */
    .toast-container {
        left: var(--space-md);
        right: var(--space-md);
        bottom: calc(var(--player-height) + var(--space-md));
    }

    .toast {
        min-width: auto;
        max-width: none;
    }

    /* Context Menu */
    .context-menu {
        max-width: calc(100vw - 40px);
    }
}

/* ============================================
   TABLET (768px - 1024px)
   ============================================ */
@media (min-width: 768px) and (max-width: 1024px) {
    :root {
        --sidebar-width: 240px;
    }

    #app {
        grid-template-columns: var(--sidebar-width) 1fr;
    }

    .sidebar {
        width: var(--sidebar-width);
    }

    .logo-text {
        font-size: var(--text-lg);
    }

    .nav-link span {
        font-size: var(--text-xs);
    }

    /* Hero */
    .hero-section {
        grid-template-columns: 1fr;
        gap: var(--space-xl);
    }

    .hero-visual {
        order: -1;
        justify-self: center;
    }

    /* Grids */
    .song-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    /* Fullscreen Player */
    .player-layout {
        grid-template-columns: 1fr;
        gap: var(--space-xl);
    }

    .player-right {
        height: 400px;
    }

    /* Mini Player */
    .player-bar {
        grid-template-columns: 1.5fr 2fr 1fr;
    }
}

/* ============================================
   DESKTOP (> 1024px)
   ============================================ */
@media (min-width: 1025px) {
    /* Default styles apply */
}

/* ============================================
   LARGE SCREENS (> 1440px)
   ============================================ */
@media (min-width: 1440px) {
    :root {
        --sidebar-width: 300px;
    }

    .song-grid {
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    }

    .player-layout {
        max-width: 1800px;
    }

    .album-art-container {
        max-width: 600px;
    }
}

/* ============================================
   ORIENTATION
   ============================================ */

/* Landscape Mobile */
@media (max-height: 500px) and (orientation: landscape) {
    .hero-section {
        min-height: auto;
        padding: var(--space-lg);
    }

    .hero-visual {
        display: none;
    }

    .player-layout {
        grid-template-columns: auto 1fr;
        padding: var(--space-md);
    }

    .album-art-container {
        max-width: 200px;
    }

    .lyrics-container {
        height: 250px;
    }
}

/* ============================================
   HIGH DPI / RETINA
   ============================================ */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    .album-art,
    .song-cover img,
    .player-cover {
        image-rendering: -webkit-optimize-contrast;
    }
}

/* ============================================
   DARK MODE PREFERENCE (System)
   ============================================ */
@media (prefers-color-scheme: dark) {
    /* Default dark theme already applied */
}

@media (prefers-color-scheme: light) {
    /* Only apply if no theme explicitly set */
    html:not([data-theme]) {
        /* Light theme variables would be injected by JS */
    }
}

/* ============================================
   PRINT STYLES
   ============================================ */
@media print {
    .sidebar,
    .main-header,
    .player-bar,
    .modal,
    .toast-container,
    .context-menu {
        display: none !important;
    }

    #app {
        display: block;
    }

    .page {
        display: block !important;
        padding: 0;
    }

    .lyrics-content {
        height: auto;
        overflow: visible;
    }

    .lyrics-line {
        color: black !important;
        font-size: 12pt;
        padding: 6pt 0;
    }

    .lyrics-line.active {
        font-weight: bold;
        color: black !important;
    }
}

/* ============================================
   SAFE AREA (Notch Devices)
   ============================================ */
@supports (padding-top: env(safe-area-inset-top)) {
    .main-header {
        padding-top: env(safe-area-inset-top);
        height: calc(var(--header-height) + env(safe-area-inset-top));
    }

    .player-bar {
        padding-bottom: env(safe-area-inset-bottom);
        height: calc(var(--player-height) + env(safe-area-inset-bottom));
    }

    .sidebar {
        padding-top: env(safe-area-inset-top);
    }

    .toast-container {
        bottom: calc(var(--player-height) + env(safe-area-inset-bottom) + var(--space-lg));
    }
}

/* ============================================
   HOVER CAPABILITY
   ============================================ */
@media (hover: hover) {
    .song-card:hover .song-play {
        opacity: 1;
    }
}

@media (hover: none) {
    .song-play {
        opacity: 1;
        background: rgba(0, 0, 0, 0.3);
    }

    .song-list-actions {
        opacity: 1;
    }

    .volume-slider-container {
        width: 80px;
    }
}

/* ============================================
   TOUCH DEVICE OPTIMIZATIONS
   ============================================ */
@media (pointer: coarse) {
    /* Larger touch targets */
    .nav-link,
    .control-btn,
    .action-btn,
    .btn {
        min-height: 44px;
        min-width: 44px;
    }

    /* Remove hover effects */
    .hover-lift:hover,
    .hover-scale:hover {
        transform: none;
    }

    /* Show scrollbars */
    ::-webkit-scrollbar {
        width: 4px;
    }
}

/* ============================================
   REDUCED MOTION
   ============================================ */
@media (prefers-reduced-motion: reduce) {
    html {
        scroll-behavior: auto;
    }

    .vinyl-record {
        animation: none;
    }

    .playing-indicator span {
        animation: none;
        height: 50%;
    }

    .progress-fill {
        transition: none;
    }

    .page {
        animation: none;
    }
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Hide on mobile */
.hide-mobile { display: inherit; }
@media (max-width: 767px) {
    .hide-mobile { display: none !important; }
}

/* Hide on tablet */
.hide-tablet { display: inherit; }
@media (min-width: 768px) and (max-width: 1024px) {
    .hide-tablet { display: none !important; }
}

/* Hide on desktop */
.hide-desktop { display: none; }
@media (min-width: 1025px) {
    .hide-desktop { display: none !important; }
}

/* Show only on mobile */
.show-mobile { display: none; }
@media (max-width: 767px) {
    .show-mobile { display: inherit !important; }
}

/* Container queries support (future-proofing) */
@container (max-width: 400px) {
    .container-responsive {
        flex-direction: column;
    }
}
